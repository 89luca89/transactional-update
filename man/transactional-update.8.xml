<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN"
                   "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">

<!--  \-*\- nroff \-*\- -->
<!--  Copyright 2016 Thorsten Kukuk &lt;kukuk@suse.de&gt; -->

<!--  This file is part of transactional\-update. -->

<!--  issue\-generator is free software; you can redistribute it and/or -->
<!--  modify it under the terms of the GNU General Public License as -->
<!--  published by the Free Software Foundation; either version 2 of the -->
<!--  License, or (at your option) any later version. -->

<!--  issue\-generator is distributed in the hope that it will be useful, -->
<!--  but WITHOUT ANY WARRANTY; without even the implied warranty of -->
<!--  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU -->
<!--  General Public License for more details. -->

<!--  You should have received a copy of the GNU General Public -->
<!--  License along with issue\-generator; see the file COPYING.  If not, -->
<!--  write to the Free Software Foundation, Inc., 51 Franklin Street \- Suite 500, -->
<!--  Boston, MA 02111\-1307, USA. -->

<refentry id='transactional-update8'>

  <refmeta>
    <refentrytitle>transactional-update</refentrytitle>
    <manvolnum>8</manvolnum>
    <refmiscinfo class='setdesc'>transactional-update</refmiscinfo>
  </refmeta>

  <refnamediv id='name'>
    <refname>transactional-update</refname>
    <refname>transactional-update.service</refname>
    <refname>transactional-update.timer</refname>
    <refpurpose>Apply updates to the system in an atomic way via transactional
    updates.</refpurpose>
  </refnamediv>

<!-- body begins here -->
  <refsynopsisdiv id='synopsis'>
    <cmdsynopsis>
      <command>/usr/sbin/transactional-update</command>
      <arg choice='opt'>--help</arg>
      <arg choice='opt'>--version</arg>
    </cmdsynopsis>
    <cmdsynopsis>
      <command>/usr/sbin/transactional-update</command>
      <group choice='plain'>
	<arg choice='plain'>up</arg>
	<arg choice='plain'>dup</arg>
	<arg choice='plain'>patch</arg>
	<arg choice='plain'>ptf</arg>
	<arg choice='plain'>bootloader</arg>
    </group>
    </cmdsynopsis>
    <para><filename>transactional-update.service</filename></para>
    <para><filename>transactional-update.timer</filename></para>
  </refsynopsisdiv>

<refsect1 id='description'><title>DESCRIPTION</title>
<para><emphasis remap='B'>transactional-update</emphasis>
creates a volatile and temporary
<citerefentry><refentrytitle>issue</refentrytitle><manvolnum>5</manvolnum></citerefentry>
file based on the input files and location specified in
<citerefentry><refentrytitle>issue.d</refentrytitle><manvolnum>5</manvolnum></citerefentry>.
</para>
<para>If invoked with no arguments, it applies all input files and creates a
temporary <filename>issue</filename> file as <filename>/run/issue</filename>.
<filename>/etc/issue</filename> should be symlink to this file.</para>
</refsect1>

<refsect1 id='options'><title>OPTIONS</title>
<variablelist remap='TP'>
  <varlistentry>
    <term><option>--prefix</option> <replaceable>path</replaceable></term>
    <listitem>
      <para>Add the prefix <filename>path</filename> to all used directories and files.</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><option>network add|remove</option> <replaceable>interface</replaceable></term>
    <listitem>
      <para>Creates a deletes files of the format
      <filename>/run/issue.d/70-<replaceable>interface</replaceable>.conf</filename>. This
      files contains the name of the <replaceable>interface</replaceable> and
      the escape codes for
      <citerefentry><refentrytitle>agetty</refentrytitle><manvolnum>8</manvolnum></citerefentry>
      to insert the IPv4 and IPv6 addresses.</para>
    </listitem>
  </varlistentry>
  <varlistentry>
    <term><option>ssh add|remove</option></term>
    <listitem>
      <para>Creates or deletes the file
      <filename>/run/issue.d/60-ssh_host_keys.conf</filename> which contains
      fingerprints of the public ssh keys of the host.</para>
    </listitem>
  </varlistentry>
</variablelist>
</refsect1>

<refsect1 id='see_also'><title>SEE ALSO</title>
<para><citerefentry><refentrytitle>systemd.timer</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
<citerefentry><refentrytitle>systemd.time</refentrytitle><manvolnum>7</manvolnum></citerefentry></para>
</refsect1>

  <refsect1 id='author'>
    <title>AUTHOR</title>
    <para>
      <command>transactional-update</command> was written by
      Thorsten Kukuk &lt;kukuk@suse.com&gt;.
    </para>
  </refsect1>
</refentry>
